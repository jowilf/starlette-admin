<!DOCTYPE html>
<html lang="{{ get_locale() }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    {% if favicon_url %}
        <link rel="icon" type="image/x-icon" href="{{ favicon_url }}"/>
    {% endif %}
    {% block head_meta %}{% endblock %}
    {% block title %}<title>{{ title or app_title }}</title>{% endblock %}
    <link rel="stylesheet" href="{{ url_for(__name__ ~ ':statics', path='css/tabler.min-1.1.0.css') }}">
    <link rel="stylesheet" href="{{ url_for(__name__ ~ ':statics', path='css/fontawesome.min.css') }}">
    <style>
        @import url('https://rsms.me/inter/inter.css');

        :root {
            --tblr-font-sans-serif: 'Inter Var', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif;
        }

        body {
            font-feature-settings: "cv03", "cv04", "cv11";
        }

        .navbar-logo {
            width: auto;
            height: 2rem;
        }
        /* Fix dark mode for select2 and collection */
        body[data-bs-theme="dark"] .select2-dropdown,
        body[data-bs-theme="dark"] .select2-container--default .select2-selection--single,
        body[data-bs-theme="dark"] .select2-container--default .select2-selection--multiple,
        body[data-bs-theme="dark"] .select2-container--default .select2-selection--multiple .select2-selection__choice,
        body[data-bs-theme="dark"] .select2-container--default .select2-search--dropdown .select2-search__field,
        body[data-bs-theme="dark"] .select2-container--default .select2-results__option--selected{
            background-color: #151f2c;
            border: 1px solid #25384f;
            color: #dce1e7;
        }
        body[data-bs-theme="dark"] .select2-container--default .select2-selection--single .select2-selection__rendered{
            color: #dce1e7;
        }
        body[data-bs-theme="dark"] div.dt-button-collection{
            background-color: #16202c;
        }
    </style>
    {% block head_css %}{% endblock %}
</head>

<body>
{% block body %}{% endblock %}
{% block modal %}{% endblock %}
<script type="text/javascript" src="{{ url_for(__name__ ~ ':statics', path='js/vendor/jquery.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for(__name__ ~ ':statics', path='js/vendor/js.cookie.min.js') }}"></script>
<script type="text/javascript"
        src="{{ url_for(__name__ ~ ':statics', path='js/vendor/tabler.min-1.1.0.js') }}"></script>
{% block script %}{% endblock %}
<script>
    $(function () {
        $(".language-switcher-item").each(function () {
            let el = $(this);
            el.on("click", function () {
                Cookies.set(String(el.data("cookie-name")), String(el.data("lang")));
                window.location.reload();
            });
        });

        $(".timezone-switcher-item").each(function () {
            let el = $(this);
            el.on("click", function () {
                Cookies.set(String(el.data("cookie-name")), String(el.data("tz")));
                window.location.reload();
            });
        });

        {% if timezone_config and timezone_config.use_user_locale_timezone %}
        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        if (!Cookies.get('timezone') && timezone) {
            Cookies.set('timezone', timezone);
        }
        {% endif %}

        /* Enable and update dark-mode based on system settings */
        function applyTheme() {
            const prefersDarkScheme = window.matchMedia("(prefers-color-scheme: dark)").matches;
            if (prefersDarkScheme) {
                $("body").attr("data-bs-theme", "dark");
            } else {
                $("body").removeAttr("data-bs-theme");
            }
        }
        applyTheme();
        window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", applyTheme);
    });
</script>
</body>

</html>
